<div class="container content-box mt-5 text-center" *ngIf="user; else loading">
  <p *ngIf="message" class="alert alert-success text-center">
    {{ message }}
  </p>
  <h2 class="text-center title mb-4">Bienvenue, {{ user.surnom }} ğŸ¾</h2>

  <div class="row justify-content-center align-items-center profile-layout">
    <!-- Photo -->
    <div class="col-md-4 justify-content-center">
      <img [src]="'https://127.0.0.1:8000/uploads/profiles/' + (user.photo || 'sans_photo.png')"
           alt="Photo de profil"
           class="profile-photo">           
    </div>

    <!-- Information -->
    <div class="col-md-6 profile-info">
      <p><strong>Nom :</strong> {{ user.nom }}</p>
      <p><strong>PrÃ©nom :</strong> {{ user.prenom }}</p>
      <p><strong>RÃ´le :</strong> {{ user.role }}</p>
      <p><strong>Email :</strong> {{ user.email }}</p>
      <p><strong>Pays et Ville :</strong> {{ user.pays }}, {{ user.ville }}</p>
      <p><strong>Adresse :</strong> {{ user.adresse }}</p>
      <p><strong>TÃ©lÃ©phone :</strong> {{ user.telephone }}</p>
      <p><strong>Ã‚ge :</strong> {{ user.age }} ans</p>
      <p><strong>Date d'inscription :</strong> {{ user.date_inscription }}</p>
      <p><strong>DerniÃ¨re modification :</strong> {{ user.date_modification }}</p>

      <div class="mt-4 text-center">
        <button class="btn me-2" (click)="editProfile()">âœï¸ Modifier mon compte</button>
        <button class="btn" (click)="deleteProfile()">ğŸ—‘ï¸ Supprimer mon compte</button>
      </div>

      <div class="text-center mt-4" *ngIf="user?.role?.toLowerCase() === 'propriÃ©taire'">
        <a routerLink="/biens/create" class="btn btn-outline-info">
          ğŸ  Ajouter un logement
        </a>
      </div>

    </div>
  </div>
</div>

<ng-template #loading>
  <div class="text-center mt-5">
    <p>Chargement du profil...</p>
  </div>
</ng-template>

<!-- Section Onglets -->
<div class="mt-5 profile-tabs" *ngIf="user">
  <ul class="nav nav-tabs justify-content-center">
    <!-- RÃ©servÃ© aux propriÃ©taires -->
    <li class="nav-item" *ngIf="user?.role?.toLowerCase() === 'propriÃ©taire'">
      <a
        class="nav-link"
        [class.active]="activeTab === 'annonces'"
        (click)="activeTab = 'annonces'"
      >
        ğŸ¡ Mes annonces
      </a>
    </li>

    <li class="nav-item" *ngIf="user?.role?.toLowerCase() === 'propriÃ©taire'">
      <a
        class="nav-link"
        [class.active]="activeTab === 'recherches'"
        (click)="activeTab = 'recherches'"
      >
        ğŸ’¾ Mes recherches sauvegardÃ©es
      </a>
    </li>

    <!-- RÃ©servÃ© au client -->
    <li class="nav-item" *ngIf="user?.role?.toLowerCase() === 'client'">
      <a
        class="nav-link"
        [class.active]="activeTab === 'recherches'"
        (click)="activeTab = 'recherches'"
      >
        ğŸ’¾ Mes recherches sauvegardÃ©es
      </a>
    </li>
  </ul>

  <!-- Contenu de l'onglet -->
  <div class="tab-content mt-4">
    <!-- Mes annonces -->
    <div *ngIf="activeTab === 'annonces'">
      <app-mes-biens [userId]="user.id"></app-mes-biens>
    </div>

    <!-- Mes recherches enregistrÃ©es -->
    <div *ngIf="activeTab === 'recherches'">
      <p class="text-muted text-center">
        (ğŸ’¡ Cette section sera bientÃ´t disponible.)
      </p>
    </div>
  </div>
</div>

